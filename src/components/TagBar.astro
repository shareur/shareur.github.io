---
export interface Props {
  allTags: string[];
  current: string;
}
const { allTags, current } = Astro.props;
---
<div class="flex flex-wrap gap-2">
  {allTags.map((tag) => (
    <button class={`px-3 py-2 rounded-xl text-sm border ${current===tag ? 'bg-slate-900 text-white dark:bg-white dark:text-slate-900' : 'border-slate-300 dark:border-slate-700'}`} data-tag={tag}>{tag}</button>
  ))}
</div>
<script>
  const bus = new EventTarget();
  document.querySelectorAll('button[data-tag]').forEach(btn => {
    btn.addEventListener('click', () => {
      bus.dispatchEvent(new CustomEvent('tag-change', { detail: btn.dataset.tag }));
    });
  });
  // @ts-ignore
  window.__tagBus = bus;
</script>
